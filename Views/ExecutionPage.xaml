<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PiClientV1.ExecutionPage"
             Title="Выполнение процесса">

    <Grid RowDefinitions="Auto,*,Auto">

        <!-- Верхняя панель -->
        <Frame Grid.Row="0" BackgroundColor="#512BD4" Padding="15">
            <VerticalStackLayout>
                <Label x:Name="StatusLabel" 
                       Text="Выполняется..." 
                       FontAttributes="Bold"
                       TextColor="White"/>
                <Label x:Name="SessionLabel" 
                       FontSize="12"
                       TextColor="White"/>
            </VerticalStackLayout>
        </Frame>

        <!-- Состояние процесса -->
        <ScrollView Grid.Row="1">
            <Frame Margin="15" Padding="15">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Текущее состояние:" FontAttributes="Bold"/>
                    <Frame BackgroundColor="WhiteSmoke" Padding="10">
                        <Label x:Name="StateLabel" 
                               FontFamily="Courier"
                               LineBreakMode="WordWrap"/>
                    </Frame>

                    <Label x:Name="ActionLabel" 
                           FontSize="14"
                           TextColor="DarkBlue"/>
                </VerticalStackLayout>
            </Frame>
        </ScrollView>

        <!-- Управление -->
        <Frame Grid.Row="2" Padding="15">
            <VerticalStackLayout Spacing="10">

                <!-- Поле ввода для обучения -->
                <VerticalStackLayout x:Name="LearningPanel" Spacing="8" IsVisible="False">
                    <Label Text="Введите следующий шаг:" FontAttributes="Bold"/>
                    <Entry x:Name="UserInputEntry" 
                           Placeholder="Например: 0 | 0"
                           FontFamily="Courier"/>

                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Button Text="Проверить" 
                                Clicked="OnVerifyStepClicked"
                                BackgroundColor="Orange"/>
                        <Button Text="Подсказка" 
                                Clicked="OnGetHintClicked"
                                BackgroundColor="LightBlue"/>
                    </Grid>
                </VerticalStackLayout>

                <!-- Автоматическое выполнение -->
                <Button x:Name="AutoStepButton"
                        Text="Следующий шаг" 
                        Clicked="OnAutoStepClicked"
                        BackgroundColor="#512BD4"
                        TextColor="White"
                        IsVisible="False"/>

                <!-- Общие кнопки -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                    <Button Text="Обновить состояние" 
                            Clicked="OnRefreshClicked"/>
                    <Button Text="Назад" 
                            Clicked="OnBackClicked"
                            BackgroundColor="Gray"/>
                </Grid>

            </VerticalStackLayout>
        </Frame>

    </Grid>
</ContentPage>