<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PiClientV1.Views.EmulatorPage"
             Title="Эмулятор">

    <ScrollView>
        <VerticalStackLayout Spacing="15" Padding="15">

            <!-- Заголовок -->
            <Label Text="⚡ Эмулятор"
                   FontSize="24"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   TextColor="#FFD700"/>

            <!-- Ввод процесса -->
            <Frame BackgroundColor="#E3F2FD" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                        <Label Text="Введите процесс:"
                               FontSize="16"
                               FontAttributes="Bold"
                               TextColor="#1976D2"
                               VerticalOptions="Center"/>
                        <Button x:Name="ExamplesButton"
                                Grid.Column="1"
                                Text="?"
                                BackgroundColor="#9C27B0"
                                WidthRequest="40"
                                HeightRequest="40"
                                CornerRadius="20"
                                FontSize="16"
                                FontAttributes="Bold"
                                TextColor="#000000"
                                Clicked="OnExamplesClicked"/>
                    </Grid>
                    <Entry x:Name="ProcessInput"
                           Placeholder="a![b].0 | a?(x).0"
                           FontSize="14"
                           TextColor="#000000"/>
                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Button x:Name="StartButton"
                                Text="▶️ Запустить"
                                BackgroundColor="#4CAF50"
                                TextColor="#000000"
                                Clicked="OnStartProcessClicked"/>
                        <Button x:Name="ResetButton"
                                Grid.Column="1"
                                Text="🔄 Сбросить"
                                BackgroundColor="#FF9800"
                                TextColor="#000000"
                                Clicked="OnResetClicked"/>
                    </Grid>
                    <Button x:Name="StepButton"
                            Text="⏭️ Сделать шаг"
                            BackgroundColor="#2196F3"
                            TextColor="#000000"
                            IsEnabled="False"
                            Clicked="OnStepClicked"/>
                    <Label x:Name="SessionInfoLabel"
                           Text="Сессия не запущена"
                           FontSize="12"
                           TextColor="#000000"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Основная информация -->
            <Frame BackgroundColor="#F8F9FA" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="📊 Основная информация"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="#2C3E50"/>
                    <Label x:Name="CurrentStateLabel"
                           Text="Введите процесс и нажмите 'Запустить'"
                           FontSize="14"
                           TextColor="#000000"
                           LineBreakMode="WordWrap"/>
                    <Label x:Name="LastActionLabel"
                           Text="Последнее действие: —"
                           FontSize="12"
                           TextColor="#000000"/>
                    <Label x:Name="CompletionLabel"
                           Text="Статус: Ожидание запуска"
                           FontSize="12"
                           TextColor="#000000"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Параллельные действия -->
            <Frame BackgroundColor="#F3E5F5" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="🔄 Параллельные действия"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="#7B1FA2"/>
                    <ListView x:Name="ParallelActionsList"
                              HeightRequest="100"
                              HasUnevenRows="True">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <ViewCell>
                                    <Label Text="{Binding .}" FontSize="12" Margin="10,2" TextColor="#000000"/>
                                </ViewCell>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </VerticalStackLayout>
            </Frame>

            <!-- Переменные -->
            <Frame BackgroundColor="#E1F5FE" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="📝 Переменные"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="#01579B"/>
                    <ListView x:Name="VariablesList"
                              HeightRequest="80"
                              HasUnevenRows="True">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <ViewCell>
                                    <Label Text="{Binding .}" FontSize="11" Margin="10,1" TextColor="#000000"/>
                                </ViewCell>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </VerticalStackLayout>
            </Frame>

            <!-- Состояния каналов -->
            <Frame BackgroundColor="#E8F5E8" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="📡 Состояния каналов"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="#1B5E20"/>
                    <ListView x:Name="ChannelStatesList"
                              HeightRequest="80"
                              HasUnevenRows="True">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <ViewCell>
                                    <Label Text="{Binding .}" FontSize="11" Margin="10,1" TextColor="#000000"/>
                                </ViewCell>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </VerticalStackLayout>
            </Frame>

            <!-- Активные ограничения -->
            <Frame BackgroundColor="#FFF3E0" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="🚫 Активные ограничения"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="#E65100"/>
                    <ListView x:Name="ActiveRestrictionsList"
                              HeightRequest="80"
                              HasUnevenRows="True">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <ViewCell>
                                    <Label Text="{Binding .}" FontSize="11" Margin="10,1" TextColor="#000000"/>
                                </ViewCell>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </VerticalStackLayout>
            </Frame>

            <!-- История выполнения -->
            <Frame BackgroundColor="#F5F5F5" Padding="15">
                <VerticalStackLayout Spacing="10">
                    <Label Text="📖 Журнал исполнения"
                           FontSize="16"
                           FontAttributes="Bold"
                           TextColor="#455A64"/>
                    <ListView x:Name="HistoryList"
                              HeightRequest="120"
                              HasUnevenRows="True">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <ViewCell>
                                    <Label Text="{Binding .}" FontSize="11" Margin="10,2" TextColor="#000000"/>
                                </ViewCell>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>